<style>
    .btn-group-vertical>.btn,
    .btn-group>.btn {
      position: relative;
      -ms-flex: 1 1 auto;
      -webkit-box-flex: 1;
      flex: 1 1 auto;
      width: 140px;
      margin-bottom: -25px;
    }
  </style>
  
  {% load static %}

  {% include "layout/header.html" %}
    <!-- Main Content -->
  <div class="main-content">
    <section class="section">
  
      <div class="section-body">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <ul class="breadcrumb breadcrumb-style" style="margin-bottom: 0px;;">
                      <li class="breadcrumb-item">
                        <h4 class="page-title m-b-0">Book Details</h4>
                      </li>
                      <li class="breadcrumb-item">
  
  
  
  
  
                      </li>
                    </ul>
                  </div>
                  <div class="col-md-6 pull-right" style="margin-top: 7px;">
  
                    <a href="/add_book/" class="btn btn-icon btn-primary pull-right"> Add New Book</a>
                  </div>
                </div>
                <hr>
                <br>
  
  
                <div class="row">
                  <div class="col-12">
                    <div class="row">
  
  
                      <div class="col-md-3">
                        <div class="form-group">
                          <label>Start Date <span style="color:red">*</span>:</label>
                          <div class="input-group">
                            <input type="date" class="form-control" value="{{first_date|date:'Y-m-d'}}" id="first_date">
                          </div>
                        </div>
                      </div>
  
  
                      <div class="col-md-3">
                        <div class="form-group">
                          <label>End Date <span style="color:red">*</span>:</label>
                          <div class="input-group">
                            <input type="date" class="form-control" value="{{last_date|date:'Y-m-d'}}" id="last_date">
                          </div>
                        </div>
                      </div>
  
  
   
  
  
  
  
  

                      <div class="col-md-1">
                        <div class="form-group">
                          <div class="buttons">
                            <a type="button" class="btn btn-primary btn-sm" style="margin-top: 45%;" onclick="date_book_search_filter()">search</a>
                          </div>
                        </div>
                      </div> 
  
  
                    </div>
                  </div>
                </div>
  
  
  
  
  
                <div id="table_div">
  
  
                  <div class="table-responsive containertable">
                    <table class="table table-hover" id="view_table">
                      <thead>
                        <tr>
                          <th class="text-center"> Id </th>
  
                          <th>Book</th> 
                          <th>Author</th>
                          <th>DOP</th>
                          <th>Condition</th>
                          <th>per_day_Price</th>
                          <th>per_hour_Price</th>
                          <th>Action</th>
  
  
                        </tr>
                      </thead>
                      <tbody>
  
                        {% for i in book_obj %}
  
                        <tr>
                          <th scope="row">{{i.id}}</th>
                          <td>{{i.Book}}</td>
                          <td>{{i.Author}}</td>
                          <td>{{i.DOP}}</td>
                          <td>{{i.Condition}}</td>
                          <td>{{i.per_day_Price}}</td>
                          <td>{{i.per_hour_Price}}</td>
  
  
  
                          <td>
                            <a  style="background-color: blue;"class="btn btn-outline-primary" href="/edit_book_details/{{i.id}}"><i style="color: aliceblue;"  class=" fas fa fa-edit"
                                aria-hidden="true"></i></a>
                            <a type="button" class="btn btn-outline-dark" onclick="delete_book('{{i.id}}')"><i
                                class=" fas fa-trash"></i></a>
                          </td>
                        </tr>
  
                        {% endfor %}
  
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
  
  </div>
  </div>
  
  
  
  {% for i in obj %}
  <option value="{{i.id}}">}</option>
  {% endfor %}
  </select>
  
  
  
  
  <!------------------------------------------------------------------------------------------->
  
  <div class="modal fade" id="exampleModal_2" tabindex="-1" role="dialog" aria-labelledby="formModal" aria-hidden="true"
    data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="formModal">Update Employee</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
  
        <input type="hidden" id="employee_id">
  
        <div class="modal-body">
  
          <div class="form-group">
            <label>Employee Name<span style="color:red">*</span>:</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-user"></i>
                </div>
              </div>
              <input type="text" class="form-control"  placeholder="Employee Name" id="name_employee">
            </div>
          </div>
  
          <div class="form-group">
            <label>Employee Code<span style="color:red">*</span>:</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-user"></i>
                </div>
              </div>
              <input type="text" class="form-control" placeholder="Employee Code" id="code_employee">
            </div>
          </div>
  
          <div class="form-group">
            <label>Store name<span style="color:red">*</span>:</label>
            <div class="input-group">
  
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-home"></i>
                </div>
              </div>
  
              <select name="cars" id="branch_name" class="form-control" option selected="selected">
  
                {% for i in obj %}
                <option value="{{i.id}}">{{i.branch_name}}</option>
                {% endfor %}
  
              </select>
  
            </div>
          </div>
  
          <center><button type="button" onclick="update_emplyee()"
              class="btn btn-primary m-t-15 waves-effect">Update</button>
            <center>
  
        </div>
      </div>
    </div>
  </div>
  
  
  
  </body>
  
  </html>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
  
  
     function date_book_search_filter() {
       var first_date = $("#first_date").val()
       var last_date = $("#last_date").val()

      console.log(first_date)
       console.log(last_date)

       $.ajax({
         method: "POST",
         url: "/search/",
         data: {
          'first_date': first_date,
          'last_date': last_date,  
              },
         success: function (response) {
          $("#loading").hide();
         console.log(response)
          if (response['status'] == 1) {            
            $('.containertable').html("")
            $('.containertable').html(response.data)
            $('#view_table').DataTable()
            
          }
         else {
            $('.containertable').html("")
             $('.containertable').html(response.data)
             $('#view_table').DataTable()
  
          }
  
  
         }
     });
  
    }
  
    $('#employee_report').attr("class", "active")
    $("#reports").attr("class", "active")
    $(document).ready(function () {
  
      $('#employee_table').DataTable({
  
        dom: 'lBfrtip',
        buttons: [{
          extend: 'excelHtml5',
          text: 'Export to Excel',
          title: 'example',
        }
        ]
      });
    });
  
  
  
    function delete_book(id) {
      console.log(id)
      swal({
        title: "Are you sure?",
        text: "",
        icon: "warning",
        buttons: true,
        dangerMode: true,
      })
        .then((willDelete) => {
          if (willDelete) {
            $.ajax({
              method: "POST",
              url: "/delete_book/",
              data: {
                'id': id
              },
              success: function (response) {
                if (response == "success") {
                  swal("Book has been Deleted!", {
                    icon: "success",
                    button: "Ok",
                    closeOnClickOutside: false,
                  }).then(function () {
                    location.reload();
                  });
                }
              }
            });
          }
        });
    }
  
    $(document).ready(function () {
      $('#employee_view').addClass("active");
      $('#view_table').DataTable();
    });
  
  
  
  
  
  // </script>
  
  {% include "layout/footer.html" %}
